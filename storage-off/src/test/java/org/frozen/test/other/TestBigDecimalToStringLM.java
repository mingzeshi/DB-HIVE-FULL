package org.frozen.test.other;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;

public class TestBigDecimalToStringLM {

	private final static BigDecimal ONE_PLACE = new BigDecimal(65536);
	private final static int MAX_CHARS = 8;
	
	public static void main(String[] args) {
		BigDecimal b01 = new BigDecimal("0.00073243305104498112077602798956140471418191486124081165486345938077010535485127261574357648843403012506314553320407867431640625");
		BigDecimal b02 = new BigDecimal("0.00076600289921735796101373358778779778744979263371729863671113774014022877949574186098695427471483299086685292422771453857421875");
		BigDecimal b03 = new BigDecimal("0.00079957274738973480125143918601419086071767040619378561855881609951035220414021110623033206099563585667056031525135040283203125");
		BigDecimal b04 = new BigDecimal("0.00083314259556211164148914478424058393398554817867027260040649445888047562878468035147370984727643872247426770627498626708984375");
		BigDecimal b05 = new BigDecimal("0.00086671244373448848172685038246697700725342595114675958225417281825059905342914959671708763355724158827797509729862213134765625");
		BigDecimal b06 = new BigDecimal("0.00090028229190686532196455598069337008052130372362324656410185117762072247807361884196046541983804445408168248832225799560546875");
		BigDecimal b07 = new BigDecimal("0.00093385214007924216220226157891976315378918149609973354594952953699084590271808808720384320611884731988538987934589385986328125");
		BigDecimal b08 = new BigDecimal("0.00096742198825161900243996717714615622705705926857622052779720789636096932736255733244722099239965018568909727036952972412109375");
		BigDecimal b09 = new BigDecimal("0.00100099183642399584267767277537254930032493704105270750964488625573109275200702657769059877868045305149280466139316558837890625");
		BigDecimal b10 = new BigDecimal("0.00103456168459637268291537837359894237359281481352919449149256461510121617665149582293397656496125591729651205241680145263671875");
		BigDecimal b11 = new BigDecimal("0.00106813153276874952315308397182533544686069258600568147334024297447133960129596506817735435124205878310021944344043731689453125");

//		BigDecimal b01 = new BigDecimal("0.00073243305104498112077602798956140471418191486124081165486345938077010535485127261574357648843403012506314553320407867431640625");
//		BigDecimal b02 = new BigDecimal("0.00076600289921735796101373358778779778744979263371729863671113774014022877949574186098695427471483299086685292422771453857421875");
//		BigDecimal b03 = new BigDecimal("0.00079957274738973480125143918601419086071767040619378561855881609951035220414021110623033206099563585667056031525135040283203125");
//		BigDecimal b04 = new BigDecimal("0.00083314259556211164148914478424058393398554817867027260040649445888047562878468035147370984727643872247426770627498626708984375");
//		BigDecimal b05 = new BigDecimal("0.00086671244373448848172685038246697700725342595114675958225417281825059905342914959671708763355724158827797509729862213134765625");
//		BigDecimal b06 = new BigDecimal("0.00090028229190686532196455598069337008052130372362324656410185117762072247807361884196046541983804445408168248832225799560546875");
//		BigDecimal b07 = new BigDecimal("0.00093385214007924216220226157891976315378918149609973354594952953699084590271808808720384320611884731988538987934589385986328125");
//		BigDecimal b08 = new BigDecimal("0.00096742198825161900243996717714615622705705926857622052779720789636096932736255733244722099239965018568909727036952972412109375");
//		BigDecimal b09 = new BigDecimal("0.00100099183642399584267767277537254930032493704105270750964488625573109275200702657769059877868045305149280466139316558837890625");
//		BigDecimal b10 = new BigDecimal("0.00103456168459637268291537837359894237359281481352919449149256461510121617665149582293397656496125591729651205241680145263671875");
//		BigDecimal b11 = new BigDecimal("0.00106813153276874952315308397182533544686069258600568147334024297447133960129596506817735435124205878310021944344043731689453125");
		
		List<BigDecimal> bList = new ArrayList<BigDecimal>();
		bList.add(b01);
		bList.add(b02);
		bList.add(b03);
		bList.add(b04);
		bList.add(b05);
		bList.add(b06);
		bList.add(b07);
		bList.add(b08);
		bList.add(b09);
		bList.add(b10);
		bList.add(b11);
		
		for(BigDecimal b : bList) {
			System.out.println(bigDecimalToString(b));
		}
	}
	
	static String bigDecimalToString(BigDecimal bd) {
		BigDecimal cur = bd.stripTrailingZeros();
		StringBuilder sb = new StringBuilder();

		for (int numConverted = 0; numConverted < MAX_CHARS; numConverted++) {
			cur = cur.multiply(ONE_PLACE);
			int curCodePoint = cur.intValue();
			if (0 == curCodePoint) {
				break;
			}

			cur = cur.subtract(new BigDecimal(curCodePoint));
			sb.append(Character.toChars(curCodePoint));
		}

		return sb.toString();
	}
}
